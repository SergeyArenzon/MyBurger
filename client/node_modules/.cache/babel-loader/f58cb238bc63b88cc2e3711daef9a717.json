{"ast":null,"code":"import _objectSpread from \"/home/sergey/Dev/MyBurger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\n\nvar _this = this,\n    _jsxFileName = \"/home/sergey/Dev/MyBurger/client/src/containers/BurgerBuilder/BurgerBuilder.js\";\n\nimport React, { Component, useState, useEffect } from \"react\";\nimport Aux from \"../../hoc/Aux/Aux\";\nimport Burger from \"../../components/Burger/Burger\"; // import BurgerIngredient from '../../components/Burger/BurgerIngredient/BurgerIngredient';\n\nimport BuildControls from \"./../../components/Burger/BuildControls/BuildControls\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport OrderSummary from \"../../components/Burger/OrderSummary/OrderSummary\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../store/actions/index\";\n\nvar burgerBuilder = function burgerBuilder(props) {\n  // state = {\n  //   purchasable: false,\n  //   purchasing: false,\n  //   loading: false,\n  // };\n  // componentDidMount() {\n  //   // check for redirection to \"/\" init ingredients bug\n  //   if (!this.props.ings) {\n  //     this.props.onInitIngredients();\n  //   }\n  // }\n  var purchaseHandler = function purchaseHandler() {\n    _this.setState({\n      purchasing: true\n    });\n  };\n\n  var purchaseCancleHandler = function purchaseCancleHandler() {\n    _this.setState({\n      purchasing: false\n    });\n  };\n\n  var purchaseContinueHandler = function purchaseContinueHandler() {\n    _this.props.onInitPurchase();\n\n    _this.props.history.push(\"/checkout\");\n  };\n\n  var checkPurchasableHandler = function checkPurchasableHandler(price) {\n    return price.toFixed(2) > 0;\n  };\n\n  var disabledInfo = _objectSpread({}, _this.props.ings);\n\n  for (var key in disabledInfo) {\n    disabledInfo[key] = disabledInfo[key] <= 0;\n  }\n\n  var orderSummary = null;\n  var burger = _this.props.error ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 35\n    }\n  }, \"Ingredients cant be loaded\") : null;\n\n  if (_this.props.ings !== null) {\n    burger = /*#__PURE__*/React.createElement(Aux, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Burger, {\n      ingredients: _this.props.ings,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(BuildControls, {\n      ingredientAdded: _this.props.onIngredientAdded,\n      ingredientRemoved: _this.props.onIngredientRemoved,\n      disabled: disabledInfo,\n      price: _this.props.price,\n      purchasable: _this.props.price.toFixed(2) > 0 ? true : false,\n      ordered: _this.purchaseHandler,\n      loading: _this.state.loading,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }));\n    orderSummary = /*#__PURE__*/React.createElement(OrderSummary, {\n      ingredients: _this.props.ings,\n      purchaseCanceled: _this.purchaseCancleHandler,\n      purchaseContinued: _this.purchaseContinueHandler,\n      price: _this.props.price.toFixed(2),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }\n    });\n  } // if (this.props.error) {\n  //     orderSummary = <Spinner />;\n  // }\n\n\n  return /*#__PURE__*/React.createElement(Aux, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: _this.state.purchasing,\n    modalClosed: _this.purchaseCancleHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, orderSummary), burger);\n};\n\nvar mapToStateProps = function mapToStateProps(state) {\n  return {\n    ings: state.burgerBuilder.ingredients,\n    price: state.burgerBuilder.totalPrice,\n    error: state.burgerBuilder.error\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onIngredientAdded: function onIngredientAdded(ingName) {\n      return dispatch(actions.addIngredient(ingName));\n    },\n    onIngredientRemoved: function onIngredientRemoved(ingName) {\n      return dispatch(actions.removeIngredient(ingName));\n    },\n    onInitIngredients: function onInitIngredients() {\n      return dispatch(actions.initIngredients());\n    },\n    onInitPurchase: function onInitPurchase() {\n      return dispatch(actions.purchaseInit());\n    }\n  };\n};\n\nexport default connect(mapToStateProps, mapDispatchToProps)(burgerBuilder);","map":{"version":3,"sources":["/home/sergey/Dev/MyBurger/client/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","useState","useEffect","Aux","Burger","BuildControls","Modal","OrderSummary","connect","actions","burgerBuilder","props","purchaseHandler","setState","purchasing","purchaseCancleHandler","purchaseContinueHandler","onInitPurchase","history","push","checkPurchasableHandler","price","toFixed","disabledInfo","ings","key","orderSummary","burger","error","onIngredientAdded","onIngredientRemoved","state","loading","mapToStateProps","ingredients","totalPrice","mapDispatchToProps","dispatch","ingName","addIngredient","removeIngredient","onInitIngredients","initIngredients","purchaseInit"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\nimport Aux from \"../../hoc/Aux/Aux\";\nimport Burger from \"../../components/Burger/Burger\";\n// import BurgerIngredient from '../../components/Burger/BurgerIngredient/BurgerIngredient';\nimport BuildControls from \"./../../components/Burger/BuildControls/BuildControls\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport OrderSummary from \"../../components/Burger/OrderSummary/OrderSummary\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../store/actions/index\";\n\nconst burgerBuilder = (props) => {\n  // state = {\n  //   purchasable: false,\n  //   purchasing: false,\n  //   loading: false,\n  // };\n\n\n  \n  // componentDidMount() {\n  //   // check for redirection to \"/\" init ingredients bug\n  //   if (!this.props.ings) {\n  //     this.props.onInitIngredients();\n  //   }\n  // }\n\n  const purchaseHandler = () => {\n    this.setState({ purchasing: true });\n  };\n\n  const purchaseCancleHandler = () => {\n    this.setState({ purchasing: false });\n  };\n  const purchaseContinueHandler = () => {\n    this.props.onInitPurchase();\n    this.props.history.push(\"/checkout\");\n  };\n\n  const checkPurchasableHandler = (price) => {\n    return price.toFixed(2) > 0;\n  };\n\n  const disabledInfo = {\n    ...this.props.ings,\n  };\n  for (let key in disabledInfo) {\n    disabledInfo[key] = disabledInfo[key] <= 0;\n  }\n\n  let orderSummary = null;\n  let burger = this.props.error ? <p>Ingredients cant be loaded</p> : null;\n  if (this.props.ings !== null) {\n    burger = (\n      <Aux>\n        <Burger ingredients={this.props.ings} />\n        <BuildControls\n          ingredientAdded={this.props.onIngredientAdded}\n          ingredientRemoved={this.props.onIngredientRemoved}\n          disabled={disabledInfo}\n          price={this.props.price}\n          purchasable={this.props.price.toFixed(2) > 0 ? true : false}\n          ordered={this.purchaseHandler}\n          loading={this.state.loading}\n        ></BuildControls>\n      </Aux>\n    );\n    orderSummary = (\n      <OrderSummary\n        ingredients={this.props.ings}\n        purchaseCanceled={this.purchaseCancleHandler}\n        purchaseContinued={this.purchaseContinueHandler}\n        price={this.props.price.toFixed(2)}\n      ></OrderSummary>\n    );\n  }\n  // if (this.props.error) {\n  //     orderSummary = <Spinner />;\n  // }\n\n  return (\n    <Aux>\n      <Modal\n        show={this.state.purchasing}\n        modalClosed={this.purchaseCancleHandler}\n      >\n        {orderSummary}\n      </Modal>\n      {burger}\n    </Aux>\n  );\n};\n\nconst mapToStateProps = (state) => {\n  return {\n    ings: state.burgerBuilder.ingredients,\n    price: state.burgerBuilder.totalPrice,\n    error: state.burgerBuilder.error,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onIngredientAdded: (ingName) => dispatch(actions.addIngredient(ingName)),\n    onIngredientRemoved: (ingName) =>\n      dispatch(actions.removeIngredient(ingName)),\n    onInitIngredients: () => dispatch(actions.initIngredients()),\n    onInitPurchase: () => dispatch(actions.purchaseInit()),\n  };\n};\n\nexport default connect(mapToStateProps, mapDispatchToProps)(burgerBuilder);\n"]},"metadata":{},"sourceType":"module"}