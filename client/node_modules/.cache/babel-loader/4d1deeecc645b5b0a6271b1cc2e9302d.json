{"ast":null,"code":"import _objectSpread from \"/home/sergey/Dev/MyBurger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/sergey/Dev/MyBurger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/sergey/Dev/MyBurger/client/src/containers/Checkout/ContactData/ContactData.js\";\n\nimport React, { useState } from \"react\";\nimport Button from \"../../../components/UI/Button/Button\";\nimport classes from \"./ContactData.module.css\";\nimport Spinner from \"../../../components/UI/Spinner/Spinner\";\nimport Input from \"../../../components/UI/Input/Input\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../store/actions/index\";\nimport { Redirect } from \"react-router-dom\";\n\nvar contactData = function contactData(props) {\n  var _useState = useState({\n    name: {\n      elementType: \"input\",\n      elementConfig: {\n        type: \"text\",\n        placeholder: \"Your Name\"\n      },\n      value: \"\",\n      validation: {\n        required: true\n      },\n      valid: false,\n      touched: false\n    },\n    street: {\n      elementType: \"input\",\n      elementConfig: {\n        type: \"text\",\n        placeholder: \"Street\"\n      },\n      value: \"\",\n      validation: {\n        required: true\n      },\n      valid: false,\n      touched: false\n    },\n    zipCode: {\n      elementType: \"input\",\n      elementConfig: {\n        type: \"text\",\n        placeholder: \"Phone\"\n      },\n      value: \"\",\n      validation: {\n        required: true,\n        minLength: 5,\n        maxLength: 5\n      },\n      valid: false,\n      touched: false\n    },\n    email: {\n      elementType: \"input\",\n      elementConfig: {\n        type: \"email\",\n        placeholder: \"Your Email\"\n      },\n      value: \"\",\n      validation: {\n        required: true\n      },\n      valid: false,\n      touched: false\n    },\n    deliveryMethod: {\n      elementType: \"select\",\n      elementConfig: {\n        options: [{\n          value: \"fastest\",\n          displayValue: \"Fastest\"\n        }, {\n          value: \"cheapest\",\n          displayValue: \"Cheapest\"\n        }],\n        placeholder: \"ZIP Code\"\n      },\n      validation: {\n        required: false\n      },\n      value: \"fastest\",\n      valid: true,\n      touched: false\n    }\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      orderForm = _useState2[0],\n      setOrderForm = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      formIsValid = _useState4[0],\n      setFormIsValid = _useState4[1];\n\n  var orderHandler = function orderHandler(event) {\n    event.preventDefault();\n    var formData = {};\n\n    for (var formElementIdentifier in orderForm) {\n      formData[formElementIdentifier] = orderForm[formElementIdentifier].value;\n    }\n\n    var ingredients = props.ings;\n    var price = props.price; //   push new order\n\n    var order = {\n      userId: props.auth.user._id,\n      ingredients: ingredients,\n      price: price.toFixed(2),\n      orderData: formData\n    };\n    console.log(order);\n    props.onOrderBurger(order); // props.history.push(\"/\");\n  };\n\n  var checkVaildity = function checkVaildity(value, rules) {\n    var isValid = true;\n\n    if (rules.required) {\n      isValid = value.trim() !== \"\" && isValid;\n    }\n\n    if (rules.minLength) {\n      isValid = value.length >= rules.minLength && isValid;\n    }\n\n    if (rules.maxLength) {\n      isValid = value.length <= rules.maxLength && isValid;\n    }\n\n    console.log(value);\n    return isValid;\n  };\n\n  var inputChangedHandle = function inputChangedHandle(event, inputIdentifier) {\n    var updatedOrderForm = _objectSpread({}, orderForm);\n\n    var updatedFormElement = _objectSpread({}, updatedOrderForm[inputIdentifier]);\n\n    updatedFormElement.value = event.target.value;\n    updatedFormElement.valid = checkVaildity(updatedFormElement.value, updatedFormElement.validation);\n    updatedOrderForm[inputIdentifier] = updatedFormElement;\n    updatedFormElement.touched = true;\n    var formIsValid = true;\n\n    for (var key in updatedOrderForm) {\n      formIsValid = updatedOrderForm[key].valid && formIsValid;\n    }\n\n    console.log(updatedFormElement);\n    setOrderForm(updatedOrderForm);\n    setFormIsValid(formIsValid);\n  };\n\n  var formElementsArray = [];\n\n  for (var key in orderForm) {\n    formElementsArray.push({\n      id: key,\n      config: orderForm[key]\n    });\n  }\n\n  var form = null;\n\n  if (props.loading) {\n    console.log(\"---------------spinner-------------------\");\n    form = /*#__PURE__*/React.createElement(Spinner, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 16\n      }\n    });\n  } else if (!props.auth.isAuthenticated) {\n    // form = <Authentication />;\n    // props.history.push(\"/checkout/contact-data\");\n    form = /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/auth\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 16\n      }\n    });\n  } else {\n    form = /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: orderHandler,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }\n    }, \"Order Info\"), formElementsArray.map(function (formElement) {\n      return /*#__PURE__*/React.createElement(Input, {\n        key: formElement.id,\n        elementType: formElement.config.elementType,\n        elementConfig: formElement.config.elementConfig,\n        value: formElement.value,\n        invalid: !formElement.config.valid,\n        changed: function changed(event) {\n          return inputChangedHandle(event, formElement.id);\n        },\n        touched: formElement.config.touched,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 25\n        }\n      });\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      git: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }, \"CANCLE\"), /*#__PURE__*/React.createElement(Button, {\n      btnType: \"Success\",\n      disabled: !formIsValid,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, \"ORDER\"));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.ContactData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 12\n    }\n  }, form);\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    ings: state.burgerBuilder.ingredients,\n    price: state.burgerBuilder.totalPrice,\n    loading: state.order.loading,\n    auth: state.auth\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onOrderBurger: function onOrderBurger(orderData) {\n      return dispatch(actions.purchaseBurger(orderData));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(contactData);","map":{"version":3,"sources":["/home/sergey/Dev/MyBurger/client/src/containers/Checkout/ContactData/ContactData.js"],"names":["React","useState","Button","classes","Spinner","Input","connect","actions","Redirect","contactData","props","name","elementType","elementConfig","type","placeholder","value","validation","required","valid","touched","street","zipCode","minLength","maxLength","email","deliveryMethod","options","displayValue","orderForm","setOrderForm","formIsValid","setFormIsValid","orderHandler","event","preventDefault","formData","formElementIdentifier","ingredients","ings","price","order","userId","auth","user","_id","toFixed","orderData","console","log","onOrderBurger","checkVaildity","rules","isValid","trim","length","inputChangedHandle","inputIdentifier","updatedOrderForm","updatedFormElement","target","key","formElementsArray","push","id","config","form","loading","isAuthenticated","map","formElement","ContactData","mapStateToProps","state","burgerBuilder","totalPrice","mapDispatchToProps","dispatch","purchaseBurger"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Button from \"../../../components/UI/Button/Button\";\nimport classes from \"./ContactData.module.css\";\nimport Spinner from \"../../../components/UI/Spinner/Spinner\";\nimport Input from \"../../../components/UI/Input/Input\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../store/actions/index\";\nimport { Redirect } from \"react-router-dom\";\n\nconst contactData = (props) => {\n    const [orderForm, setOrderForm] = useState({\n        name: {\n            elementType: \"input\",\n            elementConfig: {\n                type: \"text\",\n                placeholder: \"Your Name\",\n            },\n            value: \"\",\n            validation: {\n                required: true,\n            },\n            valid: false,\n            touched: false,\n        },\n        street: {\n            elementType: \"input\",\n            elementConfig: {\n                type: \"text\",\n                placeholder: \"Street\",\n            },\n            value: \"\",\n            validation: {\n                required: true,\n            },\n            valid: false,\n            touched: false,\n        },\n        zipCode: {\n            elementType: \"input\",\n            elementConfig: {\n                type: \"text\",\n                placeholder: \"Phone\",\n            },\n            value: \"\",\n            validation: {\n                required: true,\n                minLength: 5,\n                maxLength: 5,\n            },\n            valid: false,\n            touched: false,\n        },\n        email: {\n            elementType: \"input\",\n            elementConfig: {\n                type: \"email\",\n                placeholder: \"Your Email\",\n            },\n            value: \"\",\n            validation: {\n                required: true,\n            },\n            valid: false,\n            touched: false,\n        },\n        deliveryMethod: {\n            elementType: \"select\",\n            elementConfig: {\n                options: [\n                    { value: \"fastest\", displayValue: \"Fastest\" },\n                    { value: \"cheapest\", displayValue: \"Cheapest\" },\n                ],\n                placeholder: \"ZIP Code\",\n            },\n            validation: { required: false },\n            value: \"fastest\",\n            valid: true,\n            touched: false,\n        },\n    });\n\n    const [formIsValid, setFormIsValid] = useState(false);\n\n    const orderHandler = (event) => {\n        event.preventDefault();\n\n        const formData = {};\n        for (let formElementIdentifier in orderForm) {\n            formData[formElementIdentifier] =\n                orderForm[formElementIdentifier].value;\n        }\n\n        const ingredients = props.ings;\n        const price = props.price;\n\n        //   push new order\n\n        const order = {\n            userId: props.auth.user._id,\n            ingredients: ingredients,\n            price: price.toFixed(2),\n            orderData: formData,\n        };\n\n        console.log(order);\n        props.onOrderBurger(order);\n        // props.history.push(\"/\");\n    };\n\n    const checkVaildity = (value, rules) => {\n        let isValid = true;\n        if (rules.required) {\n            isValid = value.trim() !== \"\" && isValid;\n        }\n        if (rules.minLength) {\n            isValid = value.length >= rules.minLength && isValid;\n        }\n        if (rules.maxLength) {\n            isValid = value.length <= rules.maxLength && isValid;\n        }\n        console.log(value);\n        return isValid;\n    };\n\n    const inputChangedHandle = (event, inputIdentifier) => {\n        const updatedOrderForm = {\n            ...orderForm,\n        };\n\n        const updatedFormElement = {\n            ...updatedOrderForm[inputIdentifier],\n        };\n        updatedFormElement.value = event.target.value;\n        updatedFormElement.valid = checkVaildity(\n            updatedFormElement.value,\n            updatedFormElement.validation\n        );\n        updatedOrderForm[inputIdentifier] = updatedFormElement;\n        updatedFormElement.touched = true;\n\n        let formIsValid = true;\n\n        for (let key in updatedOrderForm) {\n            formIsValid = updatedOrderForm[key].valid && formIsValid;\n        }\n\n        console.log(updatedFormElement);\n        setOrderForm(updatedOrderForm);\n        setFormIsValid(formIsValid);\n    };\n\n\n\n    const formElementsArray = [];\n    for (let key in orderForm) {\n        formElementsArray.push({\n            id: key,\n            config: orderForm[key],\n        });\n    }\n\n\n\n   \n\n    let form = null;\n\n    if (props.loading) {\n        console.log(\"---------------spinner-------------------\");\n        form = <Spinner />;\n    } else if (!props.auth.isAuthenticated) {\n        // form = <Authentication />;\n        // props.history.push(\"/checkout/contact-data\");\n        form = <Redirect to={\"/auth\"} />;\n    } else {\n        \n        form = (\n            \n            <form onSubmit={orderHandler}>\n                <h1>Order Info</h1>\n                {formElementsArray.map((formElement) => {\n                    return (\n                        <Input\n                            key={formElement.id}\n                            elementType={formElement.config.elementType}\n                            elementConfig={formElement.config.elementConfig}\n                            value={formElement.value}\n                            invalid={!formElement.config.valid}\n                            changed={(event) =>\n                                inputChangedHandle(event, formElement.id)\n                            }\n                            touched={formElement.config.touched}\n                        />\n                    );\n                })}\n                <Button type=\"button\"git>CANCLE</Button>\n                <Button btnType=\"Success\" disabled={!formIsValid}>\n                    ORDER\n                </Button>\n            </form>\n        );\n    }\n\n    return <div className={classes.ContactData}>{form}</div>;\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        ings: state.burgerBuilder.ingredients,\n        price: state.burgerBuilder.totalPrice,\n        loading: state.order.loading,\n        auth: state.auth,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        onOrderBurger: (orderData) =>\n            dispatch(actions.purchaseBurger(orderData)),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(contactData);\n"]},"metadata":{},"sourceType":"module"}