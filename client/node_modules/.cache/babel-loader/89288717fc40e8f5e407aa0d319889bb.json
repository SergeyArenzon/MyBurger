{"ast":null,"code":"import _objectSpread from \"/home/sergey/Dev/MyBurger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/sergey/Dev/MyBurger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/sergey/Dev/MyBurger/client/src/containers/Checkout/ContactData/ContactData.js\";\n\nimport React, { useState } from \"react\";\nimport Button from \"../../../components/UI/Button/Button\";\nimport classes from \"./ContactData.module.css\";\nimport Spinner from \"../../../components/UI/Spinner/Spinner\";\nimport Input from \"../../../components/UI/Input/Input\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../store/actions/index\";\nimport { Redirect } from \"react-router-dom\";\n\nvar contactData = function contactData(props) {\n  var _useState = useState({\n    name: {\n      elementType: \"input\",\n      elementConfig: {\n        type: \"text\" // placeholder: \"Your Name\",\n\n      },\n      value: \"\",\n      validation: {\n        required: true\n      },\n      valid: false,\n      touched: false,\n      icon: /*#__PURE__*/React.createElement(\"i\", {\n        class: \"fa fa-user-edit\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 19\n        }\n      })\n    },\n    street: {\n      elementType: \"input\",\n      elementConfig: {\n        type: \"text\" // placeholder: \"Street\",\n\n      },\n      value: \"\",\n      validation: {\n        required: true\n      },\n      valid: false,\n      touched: false\n    },\n    phone: {\n      elementType: \"input\",\n      elementConfig: {\n        type: \"text\" // placeholder: \"Phone\",\n\n      },\n      value: \"\",\n      validation: {\n        required: true,\n        minLength: 5,\n        maxLength: 5\n      },\n      valid: false,\n      touched: false\n    },\n    email: {\n      elementType: \"input\",\n      elementConfig: {\n        type: \"email\" // placeholder: \"Your Email\",\n\n      },\n      value: \"\",\n      validation: {\n        required: true\n      },\n      valid: false,\n      touched: false\n    },\n    deliveryMethod: {\n      elementType: \"select\",\n      elementConfig: {\n        options: [{\n          value: \"fastest\",\n          displayValue: \"Fastest\"\n        }, {\n          value: \"cheapest\",\n          displayValue: \"Cheapest\"\n        }],\n        placeholder: \"ZIP Code\"\n      },\n      validation: {\n        required: false\n      },\n      value: \"fastest\",\n      valid: true,\n      touched: false\n    }\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      orderForm = _useState2[0],\n      setOrderForm = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      formIsValid = _useState4[0],\n      setFormIsValid = _useState4[1];\n\n  var orderHandler = function orderHandler(event) {\n    event.preventDefault();\n    var formData = {};\n\n    for (var formElementIdentifier in orderForm) {\n      formData[formElementIdentifier] = orderForm[formElementIdentifier].value;\n    }\n\n    var ingredients = props.ings;\n    var price = props.price; //   push new order\n\n    var order = {\n      userId: props.auth.user._id,\n      ingredients: ingredients,\n      price: price.toFixed(2),\n      orderData: formData\n    };\n    console.log(order);\n    props.onOrderBurger(order); // props.history.push(\"/\");\n  };\n\n  var checkVaildity = function checkVaildity(value, rules) {\n    var isValid = true;\n\n    if (rules.required) {\n      isValid = value.trim() !== \"\" && isValid;\n    }\n\n    if (rules.minLength) {\n      isValid = value.length >= rules.minLength && isValid;\n    }\n\n    if (rules.maxLength) {\n      isValid = value.length <= rules.maxLength && isValid;\n    }\n\n    console.log(value);\n    return isValid;\n  };\n\n  var inputChangedHandle = function inputChangedHandle(event, inputIdentifier) {\n    var updatedOrderForm = _objectSpread({}, orderForm);\n\n    var updatedFormElement = _objectSpread({}, updatedOrderForm[inputIdentifier]);\n\n    updatedFormElement.value = event.target.value;\n    updatedFormElement.valid = checkVaildity(updatedFormElement.value, updatedFormElement.validation);\n    updatedOrderForm[inputIdentifier] = updatedFormElement;\n    updatedFormElement.touched = true;\n    var formIsValid = true;\n\n    for (var key in updatedOrderForm) {\n      formIsValid = updatedOrderForm[key].valid && formIsValid;\n    }\n\n    console.log(updatedFormElement);\n    setOrderForm(updatedOrderForm);\n    setFormIsValid(formIsValid);\n  };\n\n  var formElementsArray = [];\n\n  for (var key in orderForm) {\n    formElementsArray.push({\n      id: key,\n      config: orderForm[key]\n    });\n  }\n\n  var form = null;\n\n  if (props.loading) {\n    console.log(\"---------------spinner-------------------\");\n    form = /*#__PURE__*/React.createElement(Spinner, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 16\n      }\n    });\n  } else if (!props.auth.isAuthenticated) {\n    // form = <Authentication />;\n    // props.history.push(\"/checkout/contact-data\");\n    form = /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/auth\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 16\n      }\n    });\n  } else {\n    form = /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: orderHandler,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }\n    }, \"Order Info\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.InputContainer,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, formElementsArray.map(function (formElement) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 33\n        }\n      }, formElement.id), /*#__PURE__*/React.createElement(Input, {\n        key: formElement.id,\n        elementType: formElement.config.elementType,\n        elementConfig: formElement.config.elementConfig,\n        value: formElement.value,\n        invalid: !formElement.config.valid,\n        changed: function changed(event) {\n          return inputChangedHandle(event, formElement.id);\n        },\n        touched: formElement.config.touched,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        class: \"fa fa-user-edit\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 37\n        }\n      })));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.buttonsContainer,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      btnType: \"Order_Contact\",\n      disabled: !formIsValid,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 21\n      }\n    }, \"ORDER\"), /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      btnType: \"Cancle_Contact\",\n      clicked: props.cancle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 21\n      }\n    }, \"CANCLE\")));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.ContactData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 12\n    }\n  }, form);\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    ings: state.burgerBuilder.ingredients,\n    price: state.burgerBuilder.totalPrice,\n    loading: state.order.loading,\n    auth: state.auth\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onOrderBurger: function onOrderBurger(orderData) {\n      return dispatch(actions.purchaseBurger(orderData));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(contactData);","map":{"version":3,"sources":["/home/sergey/Dev/MyBurger/client/src/containers/Checkout/ContactData/ContactData.js"],"names":["React","useState","Button","classes","Spinner","Input","connect","actions","Redirect","contactData","props","name","elementType","elementConfig","type","value","validation","required","valid","touched","icon","street","phone","minLength","maxLength","email","deliveryMethod","options","displayValue","placeholder","orderForm","setOrderForm","formIsValid","setFormIsValid","orderHandler","event","preventDefault","formData","formElementIdentifier","ingredients","ings","price","order","userId","auth","user","_id","toFixed","orderData","console","log","onOrderBurger","checkVaildity","rules","isValid","trim","length","inputChangedHandle","inputIdentifier","updatedOrderForm","updatedFormElement","target","key","formElementsArray","push","id","config","form","loading","isAuthenticated","InputContainer","map","formElement","buttonsContainer","cancle","ContactData","mapStateToProps","state","burgerBuilder","totalPrice","mapDispatchToProps","dispatch","purchaseBurger"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Button from \"../../../components/UI/Button/Button\";\nimport classes from \"./ContactData.module.css\";\nimport Spinner from \"../../../components/UI/Spinner/Spinner\";\nimport Input from \"../../../components/UI/Input/Input\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../store/actions/index\";\nimport { Redirect } from \"react-router-dom\";\n\nconst contactData = (props) => {\n    const [orderForm, setOrderForm] = useState({\n        name: {\n            elementType: \"input\",\n            elementConfig: {\n                type: \"text\",\n                // placeholder: \"Your Name\",\n            },\n            value: \"\",\n            validation: {\n                required: true,\n            },\n            valid: false,\n            touched: false,\n            icon: <i class=\"fa fa-user-edit\"></i>\n        },\n        street: {\n            elementType: \"input\",\n            elementConfig: {\n                type: \"text\",\n                // placeholder: \"Street\",\n            },\n            value: \"\",\n            validation: {\n                required: true,\n            },\n            valid: false,\n            touched: false,\n        },\n        phone: {\n            elementType: \"input\",\n            elementConfig: {\n                type: \"text\",\n                // placeholder: \"Phone\",\n            },\n            value: \"\",\n            validation: {\n                required: true,\n                minLength: 5,\n                maxLength: 5,\n            },\n            valid: false,\n            touched: false,\n        },\n        email: {\n            elementType: \"input\",\n            elementConfig: {\n                type: \"email\",\n                // placeholder: \"Your Email\",\n            },\n            value: \"\",\n            validation: {\n                required: true,\n            },\n            valid: false,\n            touched: false,\n        },\n        deliveryMethod: {\n            elementType: \"select\",\n            elementConfig: {\n                options: [\n                    { value: \"fastest\", displayValue: \"Fastest\" },\n                    { value: \"cheapest\", displayValue: \"Cheapest\" },\n                ],\n                placeholder: \"ZIP Code\",\n            },\n            validation: { required: false },\n            value: \"fastest\",\n            valid: true,\n            touched: false,\n        },\n    });\n\n    const [formIsValid, setFormIsValid] = useState(false);\n\n    const orderHandler = (event) => {\n        event.preventDefault();\n\n        const formData = {};\n        for (let formElementIdentifier in orderForm) {\n            formData[formElementIdentifier] =\n                orderForm[formElementIdentifier].value;\n        }\n\n        const ingredients = props.ings;\n        const price = props.price;\n\n        //   push new order\n\n        const order = {\n            userId: props.auth.user._id,\n            ingredients: ingredients,\n            price: price.toFixed(2),\n            orderData: formData,\n        };\n\n        console.log(order);\n        props.onOrderBurger(order);\n        // props.history.push(\"/\");\n    };\n\n    const checkVaildity = (value, rules) => {\n        let isValid = true;\n        if (rules.required) {\n            isValid = value.trim() !== \"\" && isValid;\n        }\n        if (rules.minLength) {\n            isValid = value.length >= rules.minLength && isValid;\n        }\n        if (rules.maxLength) {\n            isValid = value.length <= rules.maxLength && isValid;\n        }\n        console.log(value);\n        return isValid;\n    };\n\n    const inputChangedHandle = (event, inputIdentifier) => {\n        const updatedOrderForm = {\n            ...orderForm,\n        };\n\n        const updatedFormElement = {\n            ...updatedOrderForm[inputIdentifier],\n        };\n        updatedFormElement.value = event.target.value;\n        updatedFormElement.valid = checkVaildity(\n            updatedFormElement.value,\n            updatedFormElement.validation\n        );\n        updatedOrderForm[inputIdentifier] = updatedFormElement;\n        updatedFormElement.touched = true;\n\n        let formIsValid = true;\n\n        for (let key in updatedOrderForm) {\n            formIsValid = updatedOrderForm[key].valid && formIsValid;\n        }\n\n        console.log(updatedFormElement);\n        setOrderForm(updatedOrderForm);\n        setFormIsValid(formIsValid);\n    };\n\n    const formElementsArray = [];\n    for (let key in orderForm) {\n        formElementsArray.push({\n            id: key,\n            config: orderForm[key],\n        });\n    }\n\n    let form = null;\n\n    if (props.loading) {\n        console.log(\"---------------spinner-------------------\");\n        form = <Spinner />;\n    } else if (!props.auth.isAuthenticated) {\n        // form = <Authentication />;\n        // props.history.push(\"/checkout/contact-data\");\n        form = <Redirect to={\"/auth\"} />;\n    } else {\n        form = (\n            <form onSubmit={orderHandler}>\n                <h1>Order Info</h1>\n                <div className={classes.InputContainer}>\n                    {formElementsArray.map((formElement) => {\n                        return (\n                            <div>\n                                <label>{formElement.id}</label>\n\n\n                                \n\n\n                                <Input\n                                    key={formElement.id}\n                                    elementType={formElement.config.elementType}\n                                    elementConfig={\n                                        formElement.config.elementConfig\n                                    }\n                                    value={formElement.value}\n                                    invalid={!formElement.config.valid}\n                                    changed={(event) =>\n                                        inputChangedHandle(\n                                            event,\n                                            formElement.id\n                                        )\n                                    }\n                                    touched={formElement.config.touched}\n                                >\n                                    <i class=\"fa fa-user-edit\"></i>\n                                </Input>\n                            </div>\n                        );\n                    })}\n                </div>\n\n                <div className={classes.buttonsContainer}>\n                    <Button btnType=\"Order_Contact\" disabled={!formIsValid}>\n                        ORDER\n                    </Button>\n                    <Button\n                        type=\"button\"\n                        btnType=\"Cancle_Contact\"\n                        clicked={props.cancle}\n                    >\n                        CANCLE\n                    </Button>\n                </div>\n            </form>\n        );\n    }\n\n    return <div className={classes.ContactData}>{form}</div>;\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        ings: state.burgerBuilder.ingredients,\n        price: state.burgerBuilder.totalPrice,\n        loading: state.order.loading,\n        auth: state.auth,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        onOrderBurger: (orderData) =>\n            dispatch(actions.purchaseBurger(orderData)),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(contactData);\n"]},"metadata":{},"sourceType":"module"}