{"ast":null,"code":"import _objectSpread from \"/home/sergey/Dev/MyBurger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/sergey/Dev/MyBurger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/sergey/Dev/MyBurger/client/src/containers/BurgerBuilder/BurgerBuilder.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport Aux from \"../../hoc/Aux/Aux\";\nimport Burger from \"../../components/Burger/Burger\"; // import BurgerIngredient from '../../components/Burger/BurgerIngredient/BurgerIngredient';\n\nimport BuildControls from \"./../../components/Burger/BuildControls/BuildControls\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport OrderSummary from \"../../components/Burger/OrderSummary/OrderSummary\";\nimport { connect, useDispatch } from \"react-redux\";\nimport * as actions from \"../../store/actions/index\";\n\nvar burgerBuilder = function burgerBuilder(props) {\n  // state = {\n  //   purchasable: false,\n  //   purchasing: false,\n  //   loading: false,\n  // };\n  // const [purchasable, setPurchasable] = useState(false);\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      purchasing = _useState2[0],\n      setPurchasing = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 1),\n      loading = _useState4[0];\n\n  var dispatch = useDispatch();\n\n  var onIngredientAdded = function onIngredientAdded(ingName) {\n    return dispatch(actions.addIngredient(ingName));\n  };\n\n  var onIngredientRemoved = function onIngredientRemoved(ingName) {\n    return dispatch(actions.removeIngredient(ingName));\n  };\n\n  var onInitIngredients = function onInitIngredients() {\n    return dispatch(actions.initIngredients());\n  };\n\n  var onInitPurchase = function onInitPurchase() {\n    return dispatch(actions.purchaseInit());\n  };\n\n  useEffect(function () {\n    // check for redirection to \"/\" init ingredients bug\n    if (!props.ings) {\n      props.onInitIngredients();\n    }\n\n    console.log(\"[BurgerBuilder]render\");\n  }, []);\n\n  var purchaseHandler = function purchaseHandler() {\n    setPurchasing(true);\n  };\n\n  var purchaseCancleHandler = function purchaseCancleHandler() {\n    setPurchasing(false);\n  };\n\n  var purchaseContinueHandler = function purchaseContinueHandler() {\n    props.onInitPurchase();\n    props.history.push(\"/checkout\");\n  }; // const checkPurchasableHandler = (price) => {\n  //   return price.toFixed(2) > 0;\n  // };\n\n\n  var disabledInfo = _objectSpread({}, props.ings);\n\n  for (var key in disabledInfo) {\n    disabledInfo[key] = disabledInfo[key] <= 0;\n  }\n\n  var orderSummary = null;\n  var burger = props.error ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 30\n    }\n  }, \"Ingredients cant be loaded\") : null;\n\n  if (props.ings !== null) {\n    burger = /*#__PURE__*/React.createElement(Aux, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Burger, {\n      ingredients: props.ings,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(BuildControls, {\n      ingredientAdded: onIngredientAdded,\n      ingredientRemoved: onIngredientRemoved,\n      disabled: disabledInfo,\n      price: props.price,\n      purchasable: props.price.toFixed(2) > 0 ? true : false,\n      ordered: purchaseHandler,\n      loading: loading,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }));\n    orderSummary = /*#__PURE__*/React.createElement(OrderSummary, {\n      ingredients: props.ings,\n      purchaseCanceled: purchaseCancleHandler,\n      purchaseContinued: purchaseContinueHandler,\n      price: props.price.toFixed(2),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    });\n  } // if (props.error) {\n  //     orderSummary = <Spinner />;\n  // }\n\n\n  return /*#__PURE__*/React.createElement(Aux, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: purchasing,\n    modalClosed: purchaseCancleHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, orderSummary), burger);\n};\n\nvar mapToStateProps = function mapToStateProps(state) {\n  return {\n    ings: state.burgerBuilder.ingredients,\n    price: state.burgerBuilder.totalPrice,\n    error: state.burgerBuilder.error\n  };\n}; // const mapDispatchToProps = (dispatch) => {\n//   return {\n//     onIngredientAdded: (ingName) => dispatch(actions.addIngredient(ingName)),\n//     onIngredientRemoved: (ingName) =>\n//       dispatch(actions.removeIngredient(ingName)),\n//     onInitIngredients: () => dispatch(actions.initIngredients()),\n//     onInitPurchase: () => dispatch(actions.purchaseInit()),\n//   };\n// };\n\n\nexport default connect(mapToStateProps, mapDispatchToProps)(burgerBuilder);","map":{"version":3,"sources":["/home/sergey/Dev/MyBurger/client/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","useState","useEffect","Aux","Burger","BuildControls","Modal","OrderSummary","connect","useDispatch","actions","burgerBuilder","props","purchasing","setPurchasing","loading","dispatch","onIngredientAdded","ingName","addIngredient","onIngredientRemoved","removeIngredient","onInitIngredients","initIngredients","onInitPurchase","purchaseInit","ings","console","log","purchaseHandler","purchaseCancleHandler","purchaseContinueHandler","history","push","disabledInfo","key","orderSummary","burger","error","price","toFixed","mapToStateProps","state","ingredients","totalPrice","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Aux from \"../../hoc/Aux/Aux\";\nimport Burger from \"../../components/Burger/Burger\";\n// import BurgerIngredient from '../../components/Burger/BurgerIngredient/BurgerIngredient';\nimport BuildControls from \"./../../components/Burger/BuildControls/BuildControls\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport OrderSummary from \"../../components/Burger/OrderSummary/OrderSummary\";\nimport { connect, useDispatch } from \"react-redux\";\nimport * as actions from \"../../store/actions/index\";\n\nconst burgerBuilder = (props) => {\n  // state = {\n  //   purchasable: false,\n  //   purchasing: false,\n  //   loading: false,\n  // };\n\n  // const [purchasable, setPurchasable] = useState(false);\n  const [purchasing, setPurchasing] = useState(false);\n  const [loading] = useState(false);\n  const dispatch = useDispatch();\n\n  const onIngredientAdded = (ingName) =>\n    dispatch(actions.addIngredient(ingName));\n  const onIngredientRemoved = (ingName) =>\n    dispatch(actions.removeIngredient(ingName));\n  const onInitIngredients = () => dispatch(actions.initIngredients());\n  const onInitPurchase = () => dispatch(actions.purchaseInit());\n\n  useEffect(() => {\n    // check for redirection to \"/\" init ingredients bug\n    if (!props.ings) {\n      props.onInitIngredients();\n    }\n\n    console.log(\"[BurgerBuilder]render\");\n  }, []);\n\n  const purchaseHandler = () => {\n    setPurchasing(true);\n  };\n\n  const purchaseCancleHandler = () => {\n    setPurchasing(false);\n  };\n  const purchaseContinueHandler = () => {\n    props.onInitPurchase();\n    props.history.push(\"/checkout\");\n  };\n\n  // const checkPurchasableHandler = (price) => {\n  //   return price.toFixed(2) > 0;\n  // };\n\n  const disabledInfo = {\n    ...props.ings,\n  };\n\n  for (let key in disabledInfo) {\n    disabledInfo[key] = disabledInfo[key] <= 0;\n  }\n\n  let orderSummary = null;\n  let burger = props.error ? <p>Ingredients cant be loaded</p> : null;\n  if (props.ings !== null) {\n    burger = (\n      <Aux>\n        <Burger ingredients={props.ings} />\n        <BuildControls\n          ingredientAdded={onIngredientAdded}\n          ingredientRemoved={onIngredientRemoved}\n          disabled={disabledInfo}\n          price={props.price}\n          purchasable={props.price.toFixed(2) > 0 ? true : false}\n          ordered={purchaseHandler}\n          loading={loading}\n        ></BuildControls>\n      </Aux>\n    );\n    orderSummary = (\n      <OrderSummary\n        ingredients={props.ings}\n        purchaseCanceled={purchaseCancleHandler}\n        purchaseContinued={purchaseContinueHandler}\n        price={props.price.toFixed(2)}\n      ></OrderSummary>\n    );\n  }\n  // if (props.error) {\n  //     orderSummary = <Spinner />;\n  // }\n\n  return (\n    <Aux>\n      <Modal show={purchasing} modalClosed={purchaseCancleHandler}>\n        {orderSummary}\n      </Modal>\n      {burger}\n    </Aux>\n  );\n};\n\nconst mapToStateProps = (state) => {\n  return {\n    ings: state.burgerBuilder.ingredients,\n    price: state.burgerBuilder.totalPrice,\n    error: state.burgerBuilder.error,\n  };\n};\n\n// const mapDispatchToProps = (dispatch) => {\n//   return {\n//     onIngredientAdded: (ingName) => dispatch(actions.addIngredient(ingName)),\n//     onIngredientRemoved: (ingName) =>\n//       dispatch(actions.removeIngredient(ingName)),\n//     onInitIngredients: () => dispatch(actions.initIngredients()),\n//     onInitPurchase: () => dispatch(actions.purchaseInit()),\n//   };\n// };\n\nexport default connect(mapToStateProps, mapDispatchToProps)(burgerBuilder);\n"]},"metadata":{},"sourceType":"module"}